dim(Ensemble_SO[[2]])
Ensemble_SO<-SpOt_en[[1]]
Ensemble_SO
mapply(c,Ensemble_SO,SpOt_en[[2]])
mapply(c,Ensemble_SO,SpOt_en[[3]])
Ensemble_SO<-SpOt_en[[1]]
Ensemble_Bratio<-Bratio_en[[1]]
Ensemble_F<-F_en[[1]]
Ensemble_SPR<-SPR_en[[1]]
for(ii in 2:length(Nsamps_ensemble_wts))
{
Ensemble_SO<-mapply(c,Ensemble_SO,SpOt_en[[ii]])
Ensemble_Bratio<-mapply(c,Ensemble_Bratio,Bratio_en[[ii]])
Ensemble_F<-mapply(c,Ensemble_F,F_en[[ii]])
Ensemble_SPR<-mapply(c,Ensemble_SPR,SPR_en[[ii]])
}
Ensemble_SO
dim(Ensemble_SO)
dim(Ensemble_SO[[1]])
colnames(Ensemble_SO)
as.numeric(colnames(Ensemble_SO)[1]
)
Ensemble_SO[,1]
Ensemble_SO[,1]
SO_0[-1,]
dim(SO_0[-1,])
Ensemble_SO<-SpOt_en[[1]]
Ensemble_Bratio<-Bratio_en[[1]]
Ensemble_F<-F_en[[1]]
Ensemble_SPR<-SPR_en[[1]]
for(ii in 2:length(Nsamps_ensemble_wts))
{
Ensemble_SO<-mapply(c,Ensemble_SO,SpOt_en[[ii]])
Ensemble_Bratio<-mapply(c,Ensemble_Bratio,Bratio_en[[ii]])
Ensemble_F<-mapply(c,Ensemble_F,F_en[[ii]])
Ensemble_SPR<-mapply(c,Ensemble_SPR,SPR_en[[ii]])
}
dim(SO_0[-1,])
data.frame(Year=as.numeric(colnames(Ensemble_SO)[1])
)
dim(Ensemble_SO[,1])
length(Ensemble_SO[,1])
dim(SpOt_en[[1]])
(SpOt_en[[1]])
length(SpOt_en[[1]])
dim(SpOt_en)
SpOt_en
dim(Ensemble_SO)
Ensemble_SO<-SpOt_en[[1]]
Ensemble_Bratio<-Bratio_en[[1]]
Ensemble_F<-F_en[[1]]
Ensemble_SPR<-SPR_en[[1]]
dim(Ensemble_SO)
Ensemble_SO
SpOt_en
mapply(c,SpOt_en[[1:3]])
SpOt_en[[1:3]]
Ensemble_SO<-SpOt_en[[1]]
Ensemble_SO
mapply(c,Ensemble_SO,SpOt_en[[ii]])
Ensemble_SO<-NA
for(ii in 1:length(Nsamps_ensemble_wts))
{
Ensemble_SO<-mapply(c,Ensemble_SO,SpOt_en[[ii]])
Ensemble_Bratio<-mapply(c,Ensemble_Bratio,Bratio_en[[ii]])
Ensemble_F<-mapply(c,Ensemble_F,F_en[[ii]])
Ensemble_SPR<-mapply(c,Ensemble_SPR,SPR_en[[ii]])
}
Ensemble_SO
mapply(c,NA,SpOt_en[[ii]])
c(SpOt_en)
unlist(SpOt_en)
c(SpOt_en[[1]],SpOt_en[[2]])
SpOt_en[[1]]
SpOt_en[[2]]
c(SpOt_en[[2]],SpOt_en[[3]])
mapply(c,SpOt_en[[2]],SpOt_en[[3]])
mapply(c,SpOt_en[[``]],SpOt_en[[2]],SpOt_en[[3]])
mapply(c,SpOt_en[[1]],SpOt_en[[2]],SpOt_en[[3]])
dim(mapply(c,SpOt_en[[1]],SpOt_en[[2]],SpOt_en[[3]]))
c(SpOt_en[[2]],SpOt_en[[3]])
class(c(SpOt_en[[2]],SpOt_en[[3]]))
c(c(SpOt_en[[2]],SpOt_en[[3]]))
unlist(c(SpOt_en[[2]],SpOt_en[[3]]))
?unlist
c(SpOt_en[[2]],SpOt_en[[3]])
do.call(rbind.data.frame, SpOt_en[[1]])
do.call(rbind.data.frame, list(SpOt_en[[1]],SpOt_en[[1]]))
do.call(rbind.data.frame, list(SpOt_en))
do.call(rbind.data.frame, SpOt_en)
dim(do.call(rbind.data.frame, SpOt_en))
names(SpOt_en[[1]])
names(F_en[[1]])
length(names(F_en[[1]]))
length(names(SpOt_en[[1]]))
length(names(Bratio_en[[1]]))
length(names(SPR_en[[1]]))
colnames(Ensemble_SO)<-names(SpOt_en[[1]])
Ensemble_SO
Ensemble_SO<-do.call(rbind.data.frame, SpOt_en)
colnames(Ensemble_SO)<-names(SpOt_en[[1]])
Ensemble_SO
Ensemble_SO
Ensemble_SO<-do.call(rbind.data.frame, SpOt_en)
Ensemble_SO
colnames(Ensemble_SO)
length(colnames(Ensemble_SO))
names(SpOt_en[[1]])
colnames(Ensemble_SO)<-names(SpOt_en[[1]])
Ensemble_SO
Ensemble_SO<-do.call(rbind.data.frame, SpOt_en)
colnames(Ensemble_SO)<-names(SpOt_en[[1]])
Ensemble_Bratio<-do.call(rbind.data.frame, Bratio_en)
Ensemble_F<-do.call(rbind.data.frame, F_en)
Ensemble_SPR<-do.call(rbind.data.frame, SPR_en)
colnames(Ensemble_Bratio)<-colnames(Ensemble_F)<-colnames(Ensemble_SPR)<-names(Bratio_en[[1]])
SO_0<-rbind(SO_0[-1,],data.frame(Year=as.numeric(colnames(Ensemble_SO)[1]),Metric=Ensemble_SO[,1],Model="Ensemble"))
SO_0
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
names(Ensemble_SO_plot)
colnames(Ensemble_SO_plot)
head(Ensemble_SO_plot)
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
Q
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
SO_t
SO_t$Year
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
ncol(Ensemble_SO)
SO_t$Year
Ensemble_SO[,ncol(Ensemble_SO)]
mean(Ensemble_SO[,ncol(Ensemble_SO)])
SO_t[-1,]
names(SpOt_en[[1]][nrow(modsummary.ensemble$SpawnBio)])
rbind(SO_t,data.frame(Year=names(SpOt_en[[i]][nrow(modsummary.ensemble$SpawnBio)]),Metric=unlist(SpOt_en[[i]][length(Nsamps_ensemble_wts)]),Model=input$myEnsemble[i]))
SpOt_en[[i]]
length(Nsamps_ensemble_wts)
nrow(modsummary.ensemble$Fvalue)]
nrow(modsummary.ensemble$Fvalue)
names(modsummary.ensemble)
names(modsummary.ensemble$SpawnBio)
ncols(modsummary.ensemble$SpawnBio)
ncol(modsummary.ensemble$SpawnBio)
nrow(modsummary.ensemble$SpawnBio)
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
shiny::runApp('C:/Users/Jason.Cope/Downloads/helper-main/helper-main')
shiny::runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
?get_settings_profile
?model_settings
?get_settings
?profile
remotes::install_github("r4ss/r4ss")
install.packages(c("acepack", "askpass", "audio", "BiocManager", "bookdown", "brms", "bslib", "Cairo", "classInt", "cli", "clue", "colourpicker", "config", "cpp11", "credentials", "curl", "cyclocomp", "datamods", "datawizard", "dbplyr", "DEoptimR", "DescTools", "deSolve", "dplyr", "DT", "duckdb", "ellipse", "emmeans", "EnvStats", "evaluate", "fastmatch", "fields", "flextable", "fontawesome", "forecast", "foreign", "fs", "FSA", "FSAdata", "gap", "gap.datasets", "gargle", "GenSA", "gert", "ggeffects", "ggfun", "ggplot2", "ggplotify", "gifski", "glmnet", "gnm", "GPArotation", "graphlayouts", "gss", "gtable", "gtExtras", "h2o", "Hmisc", "htmltools", "httr", "igraph", "insight", "knitr", "ks", "kutils", "labeling", "languageserver", "lattice", "lavaan", "lintr", "lmom", "lpSolve", "lubridate", "magick", "markdown", "Matrix", "MatrixExtra", "minpack.lm", "minqa", "mirt", "mockery", "MSEtool", "mvtnorm", "nlme", "nlstools", "openssl", "packrat", "pak", "patchwork", "pdftools", "pivottabler", "pkgload", "plyr", "polyclip", "prettyunits", "prodlim", "progressr", "promises", "psych", "purrr", "quanteda.textstats", "quantmod", "quantreg", "rbibutils", "RcppArmadillo", "Rdpack", "recipes", "rematch", "renv", "reticulate", "rio", "rmarkdown", "rms", "rnaturalearth", "RODBC", "rootSolve", "rpf", "rsconnect", "rstan", "rstanarm", "shiny", "shinyWidgets", "snakecase", "sp", "spatial", "splancs", "StanHeaders", "stm", "styler", "survival", "tabr", "terra", "tesseract", "tidybayes", "timeSeries", "tinytex", "TMB", "tmbstan", "units", "uuid", "vcdExtra", "vdiffr", "viridis", "vroom", "webp", "withr", "wk", "xfun", "yulab.utils"))
install.packages(c("acepack", "askpass", "audio", "BiocManager", "bookdown", "brms", "bslib", "Cairo", "classInt", "cli", "clue", "colourpicker", "config", "cpp11", "credentials", "curl", "cyclocomp", "datamods", "datawizard", "dbplyr", "DEoptimR", "DescTools", "deSolve", "dplyr", "DT", "duckdb", "ellipse", "emmeans", "EnvStats", "evaluate", "fastmatch", "fields", "flextable", "fontawesome", "forecast", "foreign", "fs", "FSA", "FSAdata", "gap", "gap.datasets", "gargle", "GenSA", "gert", "ggeffects", "ggfun", "ggplot2", "ggplotify", "gifski", "glmnet", "gnm", "GPArotation", "graphlayouts", "gss", "gtable", "gtExtras", "h2o", "Hmisc", "htmltools", "httr", "igraph", "insight", "knitr", "ks", "kutils", "labeling", "languageserver", "lattice", "lavaan", "lintr", "lmom", "lpSolve", "lubridate", "magick", "markdown", "Matrix", "MatrixExtra", "minpack.lm", "minqa", "mirt", "mockery", "MSEtool", "mvtnorm", "nlme", "nlstools", "openssl", "packrat", "pak", "patchwork", "pdftools", "pivottabler", "pkgload", "plyr", "polyclip", "prettyunits", "prodlim", "progressr", "promises", "psych", "purrr", "quanteda.textstats", "quantmod", "quantreg", "rbibutils", "RcppArmadillo", "Rdpack", "recipes", "rematch", "renv", "reticulate", "rio", "rmarkdown", "rms", "rnaturalearth", "RODBC", "rootSolve", "rpf", "rsconnect", "rstan", "rstanarm", "shiny", "shinyWidgets", "snakecase", "sp", "spatial", "splancs", "StanHeaders", "stm", "styler", "survival", "tabr", "terra", "tesseract", "tidybayes", "timeSeries", "tinytex", "TMB", "tmbstan", "units", "uuid", "vcdExtra", "vdiffr", "viridis", "vroom", "webp", "withr", "wk", "xfun", "yulab.utils"))
shiny::runApp('Github/SS-DL-tool')
test.dat.in<-SS_readdat("C:/Users/Jason.Cope/Documents/Github/SS-DL-tool/Scenarios/193_kod_3ft_3sex_selfix_est_fCVo - Copy/datafile.dat"))
test.dat.in<-SS_readdat("C:/Users/Jason.Cope/Documents/Github/SS-DL-tool/Scenarios/193_kod_3ft_3sex_selfix_est_fCVo - Copy/datafile.dat")
names(test.dat.in)
?check_exe
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
run_diagnostics(mydir = mydir, model_settings = model_settings)
run_diagnostics(mydir = mydir, model_settings = model_settings)
run_diagnostics(mydir = mydir, model_settings = model_settings)
model_settings$exe
model_settings
model_settings$exe
get = get_settings_profile( parameters =  prof_parms_names,
low =  as.numeric(trimws(unlist(strsplit(input$Prof_Low_val,",")))),
high = as.numeric(trimws(unlist(strsplit(input$Prof_Hi_val,",")))),
step_size = as.numeric(trimws(unlist(strsplit(input$Prof_step,",")))),
param_space = rep('real',length(as.numeric(trimws(unlist(strsplit(input$Prof_Low_val,",")))))),
use_prior_like = use_prior_like_in,
exe=ss3
)
?get_settings_profile
?get_settings
model_settings = get_settings(settings = list(base_name = basename(pathLP()),
run = "profile",
profile_details = get,exe="ss3"))
Q
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
remotes::install_github("chantelwetzel-noaa/HandyCode")
remotes::install_github("nwfsc-assess/nwfscDiag")
install.packages(c("dplyr", "fs", "htmltools", "lattice", "Matrix", "minqa", "nlme", "plyr", "purrr"))
install.packages(c("dplyr", "fs", "htmltools", "lattice", "Matrix", "minqa", "nlme", "plyr", "purrr"))
install.packages(c("dplyr", "fs", "htmltools", "lattice", "Matrix", "minqa", "nlme", "plyr", "purrr"))
install.packages("plyr")
shiny::runApp('Github/SS-DL-tool')
debug(profile_plot)
runApp('Github/SS-DL-tool')
SSplotProfile(summaryoutput = profilesummary, main = "Changes in total likelihood",
profile.string = get, profile.label = label, ymax = ymax1,
exact = exact)
Q
runApp('Github/SS-DL-tool')
runApp('Github/SS-DL-tool')
#' Get FishLife life history traits
#'
#' Retrieves life history trait predictions from FishLife (Thorson et al. 2018). This
#' is a wrapper for the Plot_taxa() function in the FishLife R package.
#'
#' @param species A character vector of species scientific names
#' @return A dataframe with life history trait predictions from FishLife for each species
#' @examples
#' # Look up life history traits
#' species <- c("Gadus morhua", "Centropristis striata", "Paralichthys dentatus")
#' fishlife(species)
#' @export
fishlife <- function(species){
# Setup container
spp <- sort(unique(species))
fl <- data.frame(species=spp, linf_cm=NA, k=NA, winf_g=NA, tmax_yr=NA, tmat_yr=NA,
m=NA, lmat_cm=NA, temp_c=NA, stringsAsFactors=F)
# Loop through species
for(i in 1:nrow(fl)){
# Get spp info
sciname <- fl$species[i]
genus <- stringr::word(sciname, 1)
nwords_in_spp <- length(strsplit(sciname, " ")[[1]])
species <- stringr::word(sciname, start=2, end=nwords_in_spp)
species <- ifelse(species=="spp", "predictive", species)
# Try looking up in FishLife
spp_info <- try(FishLife::Plot_taxa(FishLife::Search_species(Genus=genus, Species=species)$match_taxonomy))
if(inherits(spp_info, "try-error")){
# Record blanks
#      fl[i,2:ncol(fl)] <- rep(NA, ncol(fl)-1)
}else{
# Values are in log-scale except temperature
spp_lh_vals_log <- spp_info[[1]]$Mean_pred
spp_lh_vals <- c(exp(spp_lh_vals_log[1:7]), spp_lh_vals_log[8],spp_lh_vals_log[9:20])
#     fl[i,2:ncol(fl)] <- spp_lh_vals
}
}
# Return
#  return(fl)
return(spp_lh_vals)
}
library(FishLife)
fishlife("Sebastes mystinus")
fishlife(Sebastes mystinus)
devtools::install_github("james-thorson/FishLife")
fishlife(Sebastes mystinus)
devtools::install_github("james-thorson/FishLife")
library(FishLife)
fishlife(Sebastes mystinus)
fishlife("Sebastes mystinus")
BRF_ex<-Plot_taxa(Search_species(Genus="Scorpaenichthys",Species="marmoratus")$match_taxonomy, mfrow=c(2,2) )
library(fishbase)
library(rfishbase)
fishlife("Sebastes mystinus")
Plot_taxa( Search_species(Genus="Lutjanus",Species="campechanus")$match_taxonomy )
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
remotes::install_github("nwfsc-assess/nwfscDiag")
remotes::install_github("chantelwetzel-noaa/HandyCode")
remotes::install_github("chantelwetzel-noaa/HandyCode")
remotes::install_github("nwfsc-assess/nwfscDiag")
shiny::runApp('Github/SS-DL-tool')
fishlife("Sebastes mystinus")
packageVersion("rfishbase")
remotes::install_github( 'ropensci/rfishbase@fb-21.06', force=TRUE )
fishlife("Sebastes mystinus")
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
?pivot_longer
library(tidyr)
detach("package:tidyr", unload = TRUE)
remove.packages("cli")
install.packages("cli")
shiny::runApp('Github/SS-DL-tool')
install.packages(c("dbplyr", "duckdb", "fmesher", "htmlTable", "knitr", "posterior", "RSQLite", "withr"))
remotes::install_github("r4ss/r4ss")
remotes::install_github("chantelwetzel-noaa/HandyCode")
remotes::install_github("nwfsc-assess/nwfscDiag")
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
4960/32
?profile
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
7*8
56+24+32+32
235.95+1.5+1.6+5)*4
(235.95+1.5+1.6+5)*4
((235.95+1.5+1.6+5)*4)/4
shiny::runApp('Github/SS-DL-tool')
184*4
quad.plot.WC<-data.frame(read.csv("C:/Users/Jason.Cope/Documents/Github/Fisheries-Shiny-App/Fisheries_Updated_File.csv"))
library(calibrate)
library(gplots)
library(fields)
library(ggrepel)
library(ggplot2)
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb1))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
runApp('Github/Fisheries-Shiny-App')
quad.plot.WC<-data.frame(read.csv("C:/Users/Jason.Cope/Desktop/quadplot/2023/WC_quadplot_2023.csv"))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb1))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,4.1)+
geom_text_repel(show.legend = FALSE,aes(label = Abb1))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb1))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))+
#geom_text(aes(1,1.5,color="black",label="TRP",angle=90,vjust=1.1,size=1.1))
geom_text(aes(0.625,1.35,color="black",label="LRP: Rockfishes",angle=90,vjust=1,size=1.1))+
geom_text(aes(0.5,1.4,color="black",label="LRP: Flatfishes",angle=90,vjust=-0.1,size=1.1))
p
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))+
#geom_text(aes(1,1.5,color="black",label="TRP",angle=90,vjust=1.1,size=1.1))
geom_text(aes(0.625,1.35,label="LRP: Rockfishes",angle=90,vjust=1,size=1.1))+
geom_text(aes(0.5,1.4,label="LRP: Flatfishes",angle=90,vjust=-0.1,size=1.1))
runApp('Github/Fisheries-Shiny-App')
?geom_text
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,4.1)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))+
#geom_text(aes(1,1.5,color="black",label="TRP",angle=90,vjust=1.1,size=1.1))
geom_text(aes(0.625,1.35,label="LRP: Rockfishes",angle=90,vjust=1,size=1.1))+
geom_text(aes(0.5,1.4,label="LRP: Flatfishes",angle=90,vjust=-0.1,size=1.1))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))+
#geom_text(aes(1,1.5,color="black",label="TRP",angle=90,vjust=1.1,size=1.1))
geom_text(aes(0.625,1.35,label="LRP: Rockfishes",angle=90,vjust=1,size=1.1))+
geom_text(aes(0.5,1.4,label="LRP: Flatfishes",angle=90,vjust=-0.1,size=1.1))
runApp('Github/Fisheries-Shiny-App')
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
library(ggplot2)
library(ggbreak)
install.packages("ggbreak")
library(ggbreak)
gf=quad.plot.WC<-data.frame(read.csv("C:/Users/Jason.Cope/Desktop/quadplot/2023/WC_quadplot_2023.csv"))
#gf = data.frame(read.csv( "WC_quadplot_2023_FY2024.csv" , header = TRUE))
# update the plotted data file
update_plotted(gf_file)
spp = levels(factor(gf$Abb2))
for( i in 1:length(spp)){
df = gf[gf$Abb2 == spp[i],]
df = df[df$Assessment_Year == max(df$Assessment_Year), ]
if(i == 1){DF = df}else{DF = data.frame(rbind(DF,df))}
}
DF$Abb1 = stringr::str_replace_all(DF$Abb1, "_", " ")
DF$Abb1 = stringr::str_replace_all(DF$Abb1, "_", " ")
DF$Abb2 = stringr::str_replace_all(DF$Abb2, "_", " ")
# plot names for just quillbacks
df_short = DF[DF$Abb2 %in% c('Quillback CA','Quillback OR'),]
# DF = DF[DF$F.Fmsy < 2.0,]
df_short$x = df_short$B.Bmsy + 0.8
color_scheme = RColorBrewer::brewer.pal(n = 12, name = "Paired")[c(2,4,6)]
groundfish_status_full <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=1 , shape= 21 )+
geom_text(data=df_short, aes(x = x, y = F.Fmsy, label = Abb2), size = 3)+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab("") +
ylab("") +
geom_segment(aes(x = 1, y = 0, xend=1, yend=4), colour='black', size = 1, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=4), colour=color_scheme[1], size = 1, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=4), colour=color_scheme[3], size = 1, linetype=1) +
# geom_text(x=0.4, y=2, label="Flatfishes", color = color_scheme[1], angle = 90) +
# geom_text(x=0.7, y=2, label="Scorpaenids and Other", color = color_scheme[3], angle = 90) +
theme_classic() +
theme(legend.title = element_blank(), legend.position = "none",#c(0.9, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )
groundfish_status_full
6*8
usethis::edit_r_profile()
exp(0)
exp(-0.9)
exp(-0.02)
exp(-0.01)
exp(-0.1)
exp(-0.15)
exp(-0.12)
exp(-0.2)
exp(-2.65532)
195*150
195*155
shiny::runApp('Github/SS-DL-tool')
